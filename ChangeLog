2007-02-13  Sebastian P. Luque  <spluque@gmail.com>

	* man/plotTDR-methods.Rd (diveMove-no-bouts1-0): S4 documentation
	is now being checked in R devel, and a mismatch was found.  This
	was fixed here.

2007-02-11  Sebastian P. Luque  <spluque@gmail.com>

	* R/plotTD.R: Used unclass() on the first argument in pmax() and
	pmin() calls, to standardize comparisons on a simple number.
	Thanks to Brian Ripley.

2007-01-24  Sebastian P. Luque  <spluque@gmail.com>

	* detDive.R: .diveIndices(): Use pmax() and pmin() to avoid
	returning indices beyond the limits of the input.

	* AllMethod.R: Use drop=FALSE in extraction methods to keep structure.

2007-01-21  Sebastian P. Luque  <spluque@gmail.com>

	Moved package to CVS.

	* track.R: Removed track.R, no longer needed.

2007-01-10  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: Improved show() method for TDR objects.

	* plotTD.R: plotTD(): New argument 'cex.pts' passed to points().

	plotTD(): Removed the 'lab' par() setting from the initial, as this is
	better handled with the newly introduced ellipsis arg.

	plotTD(): Added argument '...' to be passed to par() for more flexibility
	in how to draw the plot.

2007-01-09  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R:
	Display more information for 'TDRcalibrate' show() method.

	Fixed buglet in 'TDRcalibrate' show() method that causing it to display
	speed calibration information regardless of what specific class was
	contained in the tdr slot.

	* diveStats.R, oneDiveStats.R, speedStats.R:
	Renamed .getSpeedStats() to speedStats(), as this is not really an
	accessor.

2007-01-08  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R:
	createTDR(): Provided useful default to 'concurrentData', and added a test
	for missing 'dtime', producing it if it is.

	* distSpeed.R: Removed 'id' argument.

	Removed arguments 'speed' and 'subset', as they are no longer necessary.

	* austFilter.R:
	Functions adapted to new structure in distSpeed(), making it more
	efficient.

	* distSpeed.R:
	We now handle two matrices of the same shape and size, with argument 'id'
	for dividing up the matrices into groups, and a 'subset' argument to
	subset them.

2007-01-07  Sebastian P. Luque  <spluque@gmail.com>

	* distSpeed.R:
	New arguments 'id' and 'subset' so that track() is no longer necessary;
	we return a matrix with an 'id' column.

	* readLocs.R: New argument ... passed to read.csv().

	Added a check for missing location ID and individual ID columns.

	* calibrate.R, detDive.R, detPhase.R:
	Made .detPhase() and .detDive() private, as these are too specialized for
	end users.

2007-01-06  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R, calibrate.R, detDive.R, detPhase.R, plotTD.R,
	stampDive.R: Documented private objects .speedNames, .speedCol(),
	.diveIndices(), and .night().  Also made .labDive(),
	.labDivePhase(), and .rleActivity() private.

	* zoc.R:
	Fixed bug caused by relying on the plotTDR method, rather than on the
	function plotTD() as it should be.

	* plotTD.R:
	.night(): Changed %F format string for POSIXct to %Y-%m-%d as the former
	fails in Windows platforms.

2007-01-04  Sebastian P. Luque  <spluque@gmail.com>

	* readTDR.R, AllClass.R, AllMethod.R, detDive.R, diveStats.R,
	oneDiveStats.R: Make calls to private objects more precise using
	':::' operator.

	* AllGenerics.R, AllMethod.R, plotTD.R, zoc.R:
	Removed 'plot' method and replaced it with 'plotTDR', using the new
	function 'plotTD' for doing most of the work.

	* AllMethod.R, detPhase.R, stampDive.R:
	Renamed function 'getAct' to 'rleActivity'.

	* AllMethod.R, detPhase.R, stampDive.R:
	Renamed references to components 'trip.act', 'trip.beg', and
	'trip.end' to 'activity', 'begin', and 'end', respectively, in
	returned objects and methods using these.

2007-01-03  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: Moved generics to AllGenerics.R

	* AllGenerics.R: New file.

2006-12-28  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: 'TDR' method for "[" now uses drop=FALSE (bug fix).

	'TDRcalibrate' method for plot() now tests whether we have no dives.

	* detDive.R:
	labDivePhases(): Test if we have at least one dive, otherwise return
	1-level factor.

	plotDive(): No longer color lines traces to stay close to standard
	guidelines.

2006-12-27  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R:
	rqPlot(): New argument col.line for coloring the regression line.

	calibrateSpeed(): Fixed bug where only the first component from the list
	returned by contourLines() was being used.  This caused problems when a
	chosen contour level produced several contour lines.

	rqPlot(): abline() call is now called right after contour() to increase
	visibility.

	* AllClass.R, AllMethod.R, calibrate.R, detDive.R:
	Renamed argument 'divethres' to 'dive.thr' and slot 'dive.threshold' to
	'dive.thr' for consistency.

	* AllMethod.R, calibrate.R, detPhase.R, AllClass.R:
	Renamed arguments 'seaerr' and 'landerr' to 'wet.thr' and 'dry.thr',
	respectively.

	Renamed slots 'land.threshold' and 'sea.threshold' to 'dry.thr' and
	'wet.thr', respectively.

2006-12-26  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: plotDive(): New argument 'depth.lim' to set the
	depth limits.

	.night(): New function to do night time calculations separately and more
	efficiently.

	* calibrate.R, detDive.R:
	.cutDive() and calibrateDepth(): New argument 'wiggle.tol' to control the
	proportion of maximum depth above which wiggles should be ignored during
	descent, or below which they should be considered as belonging to bottom
	phase.

2006-12-24  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: New argument 'key'.

	* detDive.R, calibrate.R:
	.cutDive() and calibrate(): New arguments 'descent.crit.q' and
	'ascent.crit.q' to control which quantiles should define the
	critical rate of descent/ascent below/above which descent and
	ascent should end/begin, respectively.

2006-12-21  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: Renamed attendance() to timeBudget() for
	appropriateness.

2006-12-20  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: getCCData(): We ensure that value is a data.frame.

	getCCData(): We use a more standard name for the method and provided
	mechanism to extract any number of named components.

	* calibrate.R:
	rqPlot(): We plot the regression line with a more appropriate range using
	all the countours found for the contour.levels argument provided.

	calibrateSpeed(): Now uses time differences between all sampling intervals.

	* diveStats.R: Reflect renaming of diveStats() to oneDiveStats().

	* oneDiveStats.R: Renamed to oneDiveStats().

2006-12-19  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R:
	drop argument is now used properly: phaseCol[, drop=TRUE].

	* AllMethod.R:
	plot method for TDRcalibrate objects now provides only levels used for
	plot legend (corrects bug causing all levels to be shown when subsetting
	only some of them).

	Test for "[" method for TDR objects should use || in if() statement.

2006-12-04  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R: calibrateSpeed(): New argument 'postscript'.

	New approach based on bivariate kernel density estimates for doing
	the calibration.

	rqPlot(): Moved here for convenience, since we no longer need the other
	functions in speedCalib.R.

	* speedCalib.R: rqPlot(): New approach to calibrate on entire file.

2006-12-03  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R:
	calibrateSpeed(): We no longer need test for calType argument at the end.
	We always replace speed and coefficients based on value returned by
	doSpeedCalib().

	* calibrate.R, speedCalib.R:
	doSpeedCalib(): We provide an argument to set tau in quantile regression,
	for more flexibility.  This can be passed through ... in calibrateSpeed().

	* speedCalib.R:
	doSpeedCalib(): We always return a list; with coefficients and corrected
	speeds if asked for, or with (0, 1) and input speed if argument calType is
	"none".

	.descAsc(): We use the sequential differences during each phase.

	New local function to perform the calculations for each phase for
	debugging purposes.

	.doSpeedCalib(): Provide more meaningful legend.

2006-11-21  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R:
	Corrected replacement methods to take only the right signature.

	Removed unnecessary if test for as.data.frame method.

2006-11-20  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: New subset method for TDR objects.

	plot(): TDRcalibrate method adjusted to new plotDive() arguments.

	getccData(): Subsetting is now done using [, y], rather than [[y]] for
	more flexibility.

	* plotDive.R: Better default for xlab format string.

	New arguments concurVars, concurVarTitles, sunrise.time, and sunset.time
	for better control of extra variables to plot.

	Removed legend for sunrise/sunset times, as this is better left to the
	user to handle.

2006-11-18  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: Removed time replacement method.

	as.data.frame(): return also the entire concurrent data data frame.

	extractDive(): Now handles new representation of TDR objects properly.

	Adjusted show method according to new representation of TDR objects.

	Modified getSpeed() accessor as above.

	New replacement methods for time, depth, and speed.

	Hidden function .speedCol() for calculating the column number of speed
	vector in concurrentData slot of TDR objects.

	* AllClass.R:
	Added new slot concurrentData to TDR objects to handle additional data
	that may need to be included for plotting/analyses for later development.

	* calibrate.R:
	calibrateSpeed(): Make use of new replacement method for speed.

	* readTDR.R:
	readTDR(): We don't rely on the input file's name to decide the class of
	the value returned.

	New arguments to map the input to the corresponding class.

2006-11-15  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R:
	More arguments for flexibility in axis label formatting and labelling.

2006-11-03  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: For as.data.frame method, return the file and dtime
	slots as attributes.

2006-10-05  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Moved 'if' statement checking for number of levels
	of labels, so legend drawing is conditional on it, but not the
	labelling of points.

	* detDive.R (labDive): Use arg 'along' in seq() call within rle.
	This bug was causing an error when only one section was present.

	* detPhase.R (getAct): Modified seq() call within rle so it uses
	its 'along' arg.  This bug was causing errors when only one phase
	was present.

2006-10-04  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Added a par("usr") call when plotting velocity to
	watch out for change in y coordinates.

2006-10-03  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: Fixed bug in 'show' TDR method causing
	inconsistencies in the units shown for the "Total Duration (d)".

	New plot method for TDRcalibrate objects, with control over which
	dives to plot, and whether to plot surface readings.

	* plotDive.R: Fixed bug due to out of range xright and xleft
	arguments to rect().

	Drop unused levels from phaseCol argument, for creating meaningful
	legend.  Do not include a legend for the point labels if there are
	more than 10 of them.

	* detDive.R (.diveIndices): New internal function to extract
	indices of dives and their surface beginning/ending.

2006-10-02  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: More control is now possible for zooming.

	Better arrangement of tk widgets.

2006-10-01  Sebastian P. Luque  <spluque@gmail.com>

	* speedCalib.R: Renamed arguments, objects and calls to methods
	related to speed.

	* readTDR.R (readTDR): Renamed argument to specify speed column
	and call to create new class object, to reflect changes in slot
	name.

	* plotDive.R: Renamed argument velocity to speed.

	* getSpeedStats.R: Renamed objects related to speed.

	* getDive.R: Renamed argument vel to speed, and renamed calls to
	methods and functions related to speed.

	* diveStats.R: Renamed calls to methods to reflect the new names
	of methods and functions related to speed.

	* distSpeed.R: Renamed argument vel to speed.

	* calibrate.R: Renamed function calibrateDepth to calibrateSpeed
	and reflected changes in methods names related to speed.

	* austFilter.R: Renamed argument velthres to speedthres.

	* AllMethod.R: Renamed methods related to velocity to speed to
	reflect changes in class slot.

	* AllClass.R: Renamed class TDRvel to the more appropriate
	TDRspeed.

2006-09-30  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Do not call X11, hard-wiring the device, rather than
	using the current one.

2006-09-29  Sebastian P. Luque  <spluque@gmail.com>

	* austFilter.R: austFilter now passes a data frame to the other
	filtering functions to conserve POSIXct class properties across
	the procedure.

	* distSpeed.R: Made the last difftime object into a numeric
	object, so it is understood by 'abs'.

2006-09-28  Sebastian P. Luque  <spluque@gmail.com>

	* AllClass.R, AllMethod.R, austFilter.R, calibrate.R
	* detDive.R, detPhase.R, distSpeed.R, diveStats.R
	* getDive.R, getVelStats.R, plotDive.R, readLocs.R
	* readTDR.R, stampDive.R, track.R, velCalib.R, zoc.R:
	All objects now handle date and time using the standard POSIXct class.

2006-08-01  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Removed silly first line of legend and x grid.

2006-07-18  Sebastian P. Luque  <spluque@gmail.com>

	NAMESPACE is now successfully implemented.

	* AllMethod.R: New accessor getFileName().

	* zzz.R: New file.

	* stampDive.R, diveStats.R, calibrate.R, detDive.R, AllMethod.R:
	Standardized accessor method names.

2006-07-17  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Removed require() call to chron, since whole package
	depends on it.  Better par() values for multiplot case.

	* velCalib.R: Added a fourth plot to doVelCalib() to show the
	density distributions of both variables, and the combined vector.

2006-07-13  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Provided better labelling of axes.

	* detDive.R: Eliminated unnecessary call to gsub() in labDive.

	* detPhase.R: Eliminated unnecessary call to gsub for creating
	returned objects.

	* readTDR.R: Eliminated rather useless message() call.

2006-05-04  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: The data frame returned by 'attendance' now has
	separate element to identify the phase number (phaseno), and
	activity performed at each of them (activity), rather than the
	single trip identifier, with zeroes for land phases.  This
	facilitates further manipulations.

2006-04-19  Sebastian P. Luque  <spluque@gmail.com>

	* velCalib.R: Made plot regions square in rqPlot, to make it
	conform to equal scale comparisons.

	Included respect=TRUE for creating plots.

2006-04-18  Sebastian P. Luque  <spluque@gmail.com>

	* velCalib.R: Added argument postscript to choose whether to
	output to eps.

2006-04-17  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R: Added argument coefs to allow using known
	coefficients for calibration.

2006-04-16  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: renamed argument colsec to phaseCol.

	* readTDR.R: More appropriate default velCol argument to readTDR.

	* velCalib.R: bandwidths for the calibration plots are now chosen
	optimally through bw.nrd.

	Added a box() around image plot.

	Got rid of contour plot which were not very useful; replaced them
	with image plots.

	Postscript output has been made horizontal.

	* calibrate.R:
	Added ellipsis argument to calibrateVel to pass to doVelCalib.

	* AllMethod.R: Removed white space at beginning and of 'show'
	method.

	Renamed velCCoefs to velCoef.

2006-04-15  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R: New argument 'offset' to be passed to calibrateDepth.

	* zoc.R: Removed initial message and 'readline' call, as it fits
	better in the documentation.

	* zoc.R: Added argument 'offset' to allow providing of known
	offset to use for entire record.

	* AllMethod.R: Modified messages in show method for TDRcalibrate
	to more accurate ones.

2006-04-14  Sebastian P. Luque  <spluque@gmail.com>

	* readTDR.R: New function .createChron and new arguments to
	readTDR to provide flexibility in input file structure.

	* AllMethod.R: Renamed buildTDR to createTDR.

	Modified messages in show method for TDRcalibrate to more accurate
	ones.

2006-03-31  Sebastian P. Luque  <spluque@gmail.com>

	* track.R: Corrected id default value.

	* distSpeed.R: Better names in value.

	* track.R: Renamed function.

2006-03-28  Sebastian P. Luque  <spluque@gmail.com>

	* diveStats.R: Returns a data frame now.

	* diveStats.R: Changed units output from postdive.dur to s.

	* getDive.R: Changed output units for duration (time) variables so
	they're in s.

	* AllMethod.R: new method for dPhaseLab to extract the factor for
	given dives.

	* plotDive.R: new argument 'colsec' to color dive sections.

2006-03-26  Sebastian P. Luque  <spluque@gmail.com>

	* getVelStats.R: Test for missing or NULL coefVcal arg now uses ||
	rather than |.

	* calibrate.R: Include calibrated velocity in value only if asked.

	Fixed bug where velocity wasn't being returned in calibrateVel.

2006-03-25  Sebastian P. Luque  <spluque@gmail.com>

	* diveStats.R: Fixed bug whereby postdive.dur was only being
	calculated for TDR class.

2006-03-24  Sebastian P. Luque  <spluque@gmail.com>

	* diveStats.R: Grave bug fixed where results were not being
	assigned for class TDR.

	* AllMethod.R: as.data.frame method was not giving proper column
	names.

	* austFilter.R: More helpful messages.

2006-03-23  Sebastian P. Luque  <spluque@gmail.com>

	* austFilter.R: Broke up austFilter into more discrete functions,
	which improved efficiency considerably.

	* distSpeed.R: Reversed the order of lat and lon in args, as lon
	lat, order makes more sense.

2006-03-22  Sebastian P. Luque  <spluque@gmail.com>

	* diveStats.R: Value is now a data frame; makes life easier
	afterwards.

	* stampDive.R, getDive.R, diveStats.R, calibrate.R, detDive.R:
	Replaced calls to generic time to tdrTime.

	* AllMethod.R: changed name of time generic to tdrTime to avoid
	conflict with base.

	* stampDive.R, diveStats.R, calibrate.R: Renamed argument obj to
	x.

	* AllMethod.R: Standardized arg names in all methods.

	* AllMethod.R: Changed argument name from 'x' to 'obj' when method
	is not an accessor; for convenience.

	* stampDive.R: Added a class test for the 1st arg.

	* AllMethod.R: Added attendance method to obtain an attendance
	table.

	* stampDive.R: New file.

2006-03-21  Sebastian P. Luque  <spluque@gmail.com>

	* AllMethod.R: grossAct method was not extracting properly due to
	use of "[" rather than "[[".

	* velCalib.R: Fixed axlims object in rqPlot that was only taking x
	to define the range.

	* readTDR.R: Included a tolower() for making it easier to
	recognize the TDR model in readTDR().

	* calibrate.R: Fixed bug in calibrateDepth which was testing for
	wrong class for its argument.

2006-03-20  Sebastian P. Luque  <spluque@gmail.com>

	* calibrate.R: Took into account change in name for doVelCalib.

	Included test for validity of obj argument.

	* AllMethod.R: Moved calibrateDepth, calibrateVel, and diveStats
	to separate files, as I can't get them to work like methods.

	Fixed signatures for TDRcalibrate method extractDive.

	Added diveStats method for TDRcalibrate.

	* getDive.R: Moved diveStats to AllMethod.R and getDive now works
	with a matrix with ncol >= 3.

2006-03-18  Sebastian P. Luque  <spluque@gmail.com>

	* velCalib.R: Changed argument name rate to rdepth in rqPlot.

2006-03-17  Sebastian P. Luque  <spluque@gmail.com>

	* detDive.R: labDivePhase and .cutDive now detect phases based on
	changes in depth.

2006-03-16  Sebastian P. Luque  <spluque@gmail.com>

	* zoc.R: No longer use 'invalid' so as to avoid requiring gtools.

	* plotDive.R: Removed require(gplot), as package no longer needed.

	* detDive.R: Moved .cutDive and labDivePhase here, makes more sense.

2006-03-15  Sebastian P. Luque  <spluque@gmail.com>

	* detPhase.R: Renamed output names in both getAct and detPhase.
	Changed detPhase ... arg to be at the end.

	getAct now takes a factor, rather than a numeric vector as its
	second argument.  Modified code in detPhase accordingly.

2006-03-14  Sebastian P. Luque  <spluque@gmail.com>

	* plotDive.R: Eliminated dependency on gplots -- now uses simpler
	legend() from graphics base package.

	* AllClass.R: Improved validity tests for TDR and TDRvel class.

	* getVelStats.R: Single function .getVelStats now returns a 3-col
	matrix with total distance travelled, mean velocity, and angle if
	appropriate.

	* velCalib.R: Settled on using one data point for speed
	calibration per dive.

	* getDive.R: diveStats now calls .getVelStats for velocity
	statistics, if needed.

2006-03-13  Sebastian P. Luque  <spluque@gmail.com>

	* detDive.R: labDive now returns a 2-col matrix with dive and
	postdive labels.

2006-03-12  Sebastian P. Luque  <spluque@gmail.com>

	* detDive.R: detDive now returns a data frame with dive ids and
	dive activity factor.

	* detPhase.R: detPhases now uses a factor to label rows, rather
	than numeric vector.

2006-03-11  Sebastian P. Luque  <spluque@gmail.com>

	* zoc.R: Arguments are now separate for time and depth.

	* readTDR.R: Moved .getInterval here, makes more sense.

	* detDive.R: Much improved labelling of dives.

2006-03-10  Sebastian P. Luque  <spluque@gmail.com>

	* detDive.R: More efficient handling of args in detDive.

	* detPhase.R: More versatile handling of args, passing '...' to
	getAct, in case it needs more args in the future.

2005-12-16  Sebastian P. Luque  <spluque@gmail.com>

	* getDive.R: Added rownames for output matrix because it's used by
	other functions.

	Split velStats and it calls a new function breakDive() now.

	Per dive statistics are now done with a call to by() preceded by
	building a data frame.

	* detDive.R: We now do numbering of dives in separate function
	labdive().

2005-12-15  Sebastian P. Luque  <spluque@gmail.com>

	* readLocs.R: Replaced assignment after testing for NULL argument,
	to a call to `missing'.

	* getVelStats.R: Split large function into two: getVelStats and
	velStats.

2005-12-14  Sebastian P. Luque  <spluque@gmail.com>

	* getDive.R: Removed unused argument from argument list:
	`divethres', and renamed `diveinds' to `dives'.

	* detDive.R: Replaced argument name: `phases' instead of previous
	`byphase'.

2005-07-12  Sebastian P. Luque  <spluque@gmail.com>

	* austfilter.R: Replaced sapply by lapply in first stage filter.

2005-06-16  Sebastian P. Luque  <spluque@gmail.com>

	* velcalib.R: Removed require()'s, since the package depends take
	  care of that.
